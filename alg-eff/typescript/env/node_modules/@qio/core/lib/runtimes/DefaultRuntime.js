"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.defaultRuntime = exports.DefaultRuntime = void 0;
const ts_scheduler_1 = require("ts-scheduler");
const FiberConfig_1 = require("../internals/FiberConfig");
const Exit_1 = require("../main/Exit");
const FiberRuntime_1 = require("./FiberRuntime");
class DefaultRuntime extends FiberRuntime_1.FiberRuntime {
    constructor(scheduler, config) {
        super();
        this.scheduler = scheduler;
        this.config = config;
    }
    configure(config) {
        return new DefaultRuntime(this.scheduler, config);
    }
    async unsafeExecutePromise(io) {
        return new Promise((res, rej) => {
            this.unsafeExecute(io, (exit) => Exit_1.Exit.fold(exit)(undefined, res, rej));
        });
    }
}
exports.DefaultRuntime = DefaultRuntime;
exports.defaultRuntime = () => new DefaultRuntime(ts_scheduler_1.scheduler, FiberConfig_1.FiberConfig.DEFAULT);
